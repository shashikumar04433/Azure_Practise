  apiVersion: apps/v1
            kind: Deployment
            metadata:
              name: qriuswebapp
              namespace: ${NAMESPACE}
            spec:
              replicas: 1
              selector:
                matchLabels:
                  app: qriuswebapp
              template:
                metadata:
                  labels:
                    app: qriuswebapp
                spec:
                  serviceAccountName: ${SERVICEACCOUNT}
                  automountServiceAccountToken: false
                  securityContext:
                    fsGroup: 2000
                    runAsUser: 1000
                    runAsGroup: 3000
                    seccompProfile:
                      type: RuntimeDefault
                  nodeSelector:
                    kubernetes.io/os: linux
                  volumes:
                    - name: tmpfs-1
                      emptyDir: {}
                  containers:
                    - name: qriuswebapp
                      image: ${WEBAPP_IMAGE}
                      ports:
                        - containerPort: 2121
                          name: web
                      env:
                        - name: REACT_APP_ENDPOINT_QUERY_SERVER
                          value: "${REACT_APP_ENDPOINT_QUERY_SERVER}"
                        - name: REACT_APP_ENDPOINT_CONFIGURATION_SERVER
                          value: "${REACT_APP_ENDPOINT_CONFIGURATION_SERVER}"
                        - name: REACT_APP_DATASOURCE_URL
                          value: "${REACT_APP_DATASOURCE_URL}"
                      readinessProbe:
                        httpGet:
                          path: /actuator/health
                          port: 2121
                        initialDelaySeconds: 30
                        periodSeconds: 2
                        timeoutSeconds: 1
                        successThreshold: 1
                        failureThreshold: 1
                      livenessProbe:
                        httpGet:
                          path: /actuator/health
                          port: 2121
                        initialDelaySeconds: 30
                        periodSeconds: 10
                        timeoutSeconds: 1
                        failureThreshold: 1
                      resources:
                        limits:
                          cpu: "256m"
                          memory: "512Mi"
                        requests:
                          cpu: "100m"
                          memory: "256Mi"
                      securityContext:
                        readOnlyRootFilesystem: true
                        allowPrivilegeEscalation: false
                      volumeMounts:
                        - name: tmpfs-1
                          mountPath: /tmp
